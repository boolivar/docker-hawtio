plugins {
    id "base"
    id "com.bmuschko.docker-remote-api" version "6.7.0"
}

repositories {
    mavenCentral()
}

configurations {
    hawtio {
        canBeConsumed = false
        canBeResolved = false
        transitive = false
    }
}

dependencies {
    hawtio "io.hawt:hawtio-jbang:3.0.0"
}

tasks.register("buildImage", com.bmuschko.gradle.docker.tasks.image.DockerBuildImage) {
    def hawtioVersion = configurations.hawtio.dependencies.version[0]
    inputDir = rootDir
    images = ["boolivar/hawtio:$hawtioVersion"]
    buildArgs = [HAWTIO_VERSION: "hawtio-$hawtioVersion", JAVA_VERSION: javaVersion]
}
